지금부터 이 프로젝트의 개발 및 빌드 규칙을 설정한다.
projectAiGuide 폴더의 파일들은 이전 프로젝트에서 수차례 시행착오 끝에 정리된 **검증된 빌드/경로/구조 규칙**이다.

너는 아래 수칙을 반드시 준수해야 한다:

1) 구조의 일관성
- 비즈니스 로직은 `modules/`에, 화면(UI) 렌더링은 `ui/`에 둔다.
- UI 파일에는 복잡한 데이터 변환/비즈니스 규칙을 넣지 말고 필요하면 `modules/`로 분리한다.

2) 경로 부트스트랩(필수)
- 실행 진입점은 `launcher.py`이며, `launcher.py`의 `_bootstrap_sys_path()` 로직을 유지/사용한다.
- 배포 환경(PyInstaller)의 `_internal`/`sys._MEIPASS`에서도 `modules.*`, `ui.*` import가 실패하지 않도록 경로 주입을 절대 제거하지 않는다.

3) 프로젝트 관리 모듈 경로(필수)
- 프로젝트 관리는 `modules/project_manager.py`를 기준으로 한다.
- 새 코드에서는 `from modules.project_manager import ProjectManager` 또는 `import modules.project_manager as pm` 형태를 사용한다.

4) 빌드 자동화(필수)
- 포터블 빌드는 `scripts/build_portable_exe_onedir.ps1`를 기준으로 한다.
- 새 라이브러리를 추가하면 다음을 반드시 점검한다:
	- `--collect-all <pkg>` 필요 여부
	- `--hidden-import <module>` 누락 여부
	- (tkinter 사용 시) Tcl/Tk 런타임 데이터 포함 여부

5) 에러 로깅(필수)
- 외부 통신(API/파일 I/O)은 실패 가능성을 가정하고, 실패 시 원인 파악이 가능하도록 상세 오류(가능하면 JSON payload)를 출력한다.
- 증상만 가리는 패치보다, 누락된 초기화/상태 불일치 등 **루트 원인**을 먼저 찾는다.

6) 포터블 EXE 엔트리(portable_entry.py) 규칙(필수)
- 포터블 빌드 엔트리는 `projectAiGuide/portable_entry.py`를 사용한다.
- **중요:** `portable_entry.py`는 특정 프로젝트의 `modules.*`를 import하면 안 된다.
	- 이유: 프로젝트마다 모듈 구조/이름이 달라, EXE 실행 즉시 `ModuleNotFoundError`로 기동 실패가 발생한다.
	- 대신, 번들된 `.env`를 직접 읽어 `os.environ`에 주입하는 방식처럼 **프로젝트-비의존 로더**만 둔다.
- `.env` 번들 경로는 빌드 스크립트의 `--add-data ".env;data/.env"` 매핑을 전제로 한다.
- 포트는 `PORT` 환경변수로 제어한다.
	- 참고: PowerShell에서 빌드 시점에 `$Env:PORT`를 세팅하더라도, 그 값이 EXE 런타임에 자동으로 유지된다고 가정하면 안 된다.
	- 따라서 “EXE가 항상 특정 포트로 뜨는 것”이 요구사항이면, `portable_entry.py`에서 기본값을 지정하거나(예: 8889), `.env`에 `PORT=...`를 포함시키는 방식을 택한다.
- Streamlit 기동은 `streamlit.web.cli` 경로를 사용하고, 내부 `sys.exit()`에 의해 EXE가 즉시 종료될 수 있으므로 `SystemExit`를 방어적으로 처리한다.

이제 projectAiGuide/modules/AI_RULES.md를 먼저 숙지하고, 동의하면 다음 개발을 진행하자.